gg_cases_by_LGA_poly <- ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
coord_equal() +
transition_manual(DATE) +
theme_void()
animate(gg_cases_by_LGA_poly,
fps = 100,
duration = 100)
length(unique(cases_by_LGA_df$DATE))
92/2
animate(gg_cases_by_LGA_poly,
nframes = length(unique(cases_by_LGA_df$DATE)),
fps = 2)
class(cases_by_LGA_df$ACTIVE)
library(gifski)
p_load(gifski)
library(gifski)
animate(gg_cases_by_LGA_poly,
nframes = length(unique(cases_by_LGA_df$DATE)),
fps = 2)
p_load(tidyverse,
lubridate,
ggplot2,
ggmap,
rvest,
gganimate,
plotly,
transformr,
gifski,
png)
animate(gg_cases_by_LGA_poly,
nframes = length(unique(cases_by_LGA_df$DATE)),
fps = 2)
source('B:/Analytics/Covid Melbourne/Cases LGA Map.R', echo=TRUE)
library(tidyverse)
?apply
?within
?ls
source('B:/Analytics/Covid Melbourne/Cases LGA Map.R', echo=TRUE)
gg_cases_by_LGA_poly
animate(gg_cases_by_LGA_poly,
nframes = length(unique(cases_by_LGA_df$DATE)),
fps = 2)
install.packages("rpud")
install.packages("Rtools")
install.packages("rtools")
version
installr::updateR()
install.packages("installr")
installr::updateR()
install.packages("gpuR")
install.packages("Rtools")
??gpuR
?gpuR
install.packages("rpud")
installr::updateR()
version
version
version
version
install.packages("Rtools")
install.packages("gpuR")
install.packages("parallel")
memory.limit(20000)
memory.limit(200000)
source('B:/Analytics/Covid Melbourne/Cases LGA Map.R', echo=TRUE)
cases_by_LGA_poly
cases_by_LGA_df
ggplot() +
geom_polygon(data = combined_lga_df,
aes(x = long, y = lat,
group = LGA),
fill = NA,
colour = "grey66",
size = 1)
left_join(cases_by_LGA_df,
combined_lga_df,
by = "LGA")
cases_by_LGA_poly <- left_join(cases_by_LGA_df,
combined_lga_df,
by = "LGA")
cases_by_LGA_poly$DATE <- paste(cases_by_LGA_poly$DATE, "2020")
cases_by_LGA_poly$DATE <- dmy(cases_by_LGA_poly$DATE)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
coord_equal() +
transition_manual(DATE) +
theme_void()
rm(list=ls())
gc*()
gc()
version
memory.limit()
source('B:/Analytics/Covid Melbourne/Cases LGA Map.R', echo=TRUE)
for(lga in lgacases_dataframes) {
lga_name <- str_remove_all(lga, "casesdate")
lga_name <- str_replace_all(lga_name, pattern =
"\\-|\\_", replacement = " ")
lga_name <- str_trim(lga_name)
lga_temp <- cbind(get(lga),
LGA = lga_name)
cases_by_LGA_df <- rbind(cases_by_LGA_df,
lga_temp)
}
lga_name
str_replace_all(lga_name, pattern =
"\\-|\\_", replacement = " ")
lga
get(lga)
`falls-creek-alpine-resort_casesdate`
for(lga in lgacases_dataframes) {
lga_name <- str_remove_all(lga, "casesdate")
lga_name <- str_replace_all(lga_name, pattern =
"\\-|\\_", replacement = " ")
lga_name <- str_trim(lga_name)
if(nrow(get(lga)) >0){
lga_temp <- cbind(get(lga),
LGA = lga_name)
cases_by_LGA_df <- rbind(cases_by_LGA_df,
lga_temp)
}
}
rm(list=ls())
memory.limit() %>% format("Mb")
memory.limit() %>% object.size()
memory.limit()
24528/1000
memory.size()
memory.size(FALSE)
memory.size(TRUE)
??parallel
library(parallel)
source('B:/Analytics/Covid Melbourne/Cases LGA Map.R', echo=TRUE)
anim_save("cases by lga.gif")
gg_cases_by_LGA_poly <- ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey20", high = "red2",
na.value = "grey80") +
labs(title = "Covid cases per LGA by day",
subtitle = "{DATE}") +
coord_equal() +
transition_manual(DATE) +
theme_void()
gg_cases_by_LGA_poly
92%%3
92/3
92/4
92%4
92%/%4
92%%4
source('B:/Analytics/Covid Melbourne/Cases LGA Map.R', echo=TRUE)
source('B:/Analytics/Covid Melbourne/Cases LGA Map.R', echo=TRUE)
animate(gg_cases_by_LGA_poly,
nframes = length(unique(cases_by_LGA_df$DATE)),
fps = 4)
max(cases_by_LGA_poly$DATE)
ggplot(filter(cases_by_LGA_poly,
DATE = max(DATE)),
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey20", high = "red2",
na.value = "grey80") +
labs(title = "Covid cases per LGA by day") +
coord_equal() +
# transition_manual(DATE) +
theme_void()
gg_cases_by_LGA_poly <- ggplot(filter(cases_by_LGA_poly,
DATE == max(DATE)),
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey20", high = "red2",
na.value = "grey80") +
labs(title = "Covid cases per LGA by day") +
coord_equal() +
# transition_manual(DATE) +
theme_void()
gg_cases_by_LGA_poly
rm(list=ls())
gc*()
gc()
source('B:/Analytics/Covid Melbourne/Cases LGA Map.R', echo=TRUE)
rm(list=ls())
gc()
source('B:/Analytics/Covid Melbourne/Cases LGA Map.R', echo=TRUE)
gg_cases_by_LGA_poly
library(beepr)
p_load(beepr)
gg_cases_by_LGA_poly
beepr::beep(2)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey20", high = "red2",
na.value = "grey80") +
labs(title = "Covid cases per LGA by day",
subtitle = "{frame_manual}") +
coord_equal() +
transition_manual(DATE) +
theme_void()
beepr::beep(2)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey20", high = "red2",
na.value = "grey80") +
labs(title = "Covid cases per LGA by day") +
coord_equal() +
transition_manual(DATE) +
theme_void()
beepr::beep(2)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Covid cases per LGA by day",
subtitle = "{frame}") +
coord_equal() +
transition_manual(DATE) +
theme_void()
beepr::beep(2)
View(combined_lga_df)
View(cases_by_LGA_poly)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Covid cases per LGA by day",
subtitle = "{frame_time}") +
coord_equal() +
transition_time(DATE) +
theme_void(); beep(2)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Covid cases per LGA by day",
subtitle = "{frame_time}") +
coord_equal() +
transition_time(DATE) +
theme_void() ; beep(2)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Covid cases per LGA by day",
subtitle = "{frame_time}") +
coord_equal() +
transition_time(DATE) +
theme_void()
beep(2)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Covid cases per LGA by day",
subtitle = "{frame_time}") +
coord_equal() +
transition_time(time = DATE) +
theme_void()
beep(2)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Covid cases per LGA by day",
subtitle = "{frame_time}") +
coord_equal() +
transition_manual(time = DATE) +
theme_void()
beep(2)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Covid cases per LGA by day",
subtitle = "{frame_time}") +
coord_equal() +
transition_manual(DATE) +
theme_void()
beep(2)
Greater_Melb_wp <- "https://en.wikipedia.org/wiki/Local_government_areas_of_Victoria#Greater_Melbourne"
html_nodes(Greater_Melb_wp)
html_nodes(read_html(Greater_Melb_wp))
html_nodes(read_html(Greater_Melb_wp),
css = "table")
Greater_Melb_csstabs <- html_nodes(read_html(Greater_Melb_wp),
css = "table")
as.data.frame(html_table(Greater_Melb_csstabs[1]))
as.data.frame(html_table(Greater_Melb_csstabs[2]))
as.data.frame(html_table(Greater_Melb_csstabs[,2]))
as.data.frame(html_table(Greater_Melb_csstabs[2],
fill = TRUE))
as.data.frame(html_table(Greater_Melb_csstabs[1],
fill = TRUE))
as.data.frame(html_table(Greater_Melb_csstabs[1],
fill = TRUE)) %>% View
Greater_Melb_LGAs <- as.data.frame(html_table(Greater_Melb_csstabs[1],
fill = TRUE)) %>% View
Greater_Melb_LGAs <- as.data.frame(html_table(Greater_Melb_csstabs[1],
fill = TRUE))
filter(cases_by_LGA_poly,
LGA %in% Greater_Melb_LGAs$Local.government.area)
cases_by_LGA_poly
filter(cases_by_LGA_poly,
str_detect(LGA,
regex(Greater_Melb_LGAs$Local.government.area,
ignore_case = TRUE)))
toupper(Greater_Melb_LGAs$Local.government.area)
filter(cases_by_LGA_poly,
str_detect(toupper(LGA),
toupper(Greater_Melb_LGAs$Local.government.area)))
toupper(LGA)
filter(cases_by_LGA_poly,
str_detect(toupper(Greater_Melb_LGAs$Local.government.area),
toupper(LGA)))
cases_by_GreaterMelb_LGA_poly
Greater_Melb_LGAs
Greater_Melb_LGAs$Local.government.area
Greater_Melb_LGAs <- Greater_Melb_LGAs$Local.government.area
filter(cases_by_LGA_poly,
LGA %in% Greater_Melb_LGAs)
cases_by_LGA_poly
cases_by_LGA_poly$LGA %in% Greater_Melb_LGAs
toupper(cases_by_LGA_poly$LGA) %in% toupper(Greater_Melb_LGAs)
unique(toupper(cases_by_LGA_poly$LGA) %in% toupper(Greater_Melb_LGAs))
str_detect(cases_by_LGA_poly$LGA,
paste(Greater_Melb_LGAs, sep = "|"))
str_detect(cases_by_LGA_poly$LGA,
paste(Greater_Melb_LGAs, sep = "|")) %>% unique()
paste(Greater_Melb_LGAs, sep = "|")
paste(Greater_Melb_LGAs, collapse = "|")
str_detect(cases_by_LGA_poly$LGA,
paste(Greater_Melb_LGAs, collapse = "|")) %>% unique()
tolower(cases_by_LGA_poly$LGA)
tolower(paste(Greater_Melb_LGAs, collapse = "|"))
str_detect(tolower(cases_by_LGA_poly$LGA),
tolower(paste(Greater_Melb_LGAs, collapse = "|"))) %>% unique()
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Covid cases per LGA by day") +
coord_equal(xlim = c(144.056219, 145.904833),
ylim = c(-38.763029, -37.342491)) +
transition_manual(DATE) +
theme_void()
beep(2)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Covid cases per LGA by day") +
coord_equal(xlim = c(143.75, 146.25),
ylim = c(-38.66, -37.50)) +
transition_manual(DATE) +
theme_void()
anim_save("cases by lga greater metro.gif")
beep(2)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Active Covid-19 Cases per LGA per day",
subtitle = " ",
caption = "Note: active cases and NOT new cases") +
coord_equal(xlim = c(143.50, 146.00),
ylim = c(-39.00, -36.50)) +
transition_manual(DATE) +
theme_void()
anim_save("cases by lga greater metro.gif")
beep(2)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Active Covid-19 Cases per LGA per day",
subtitle = " ",
caption = "Note: active cases and NOT new cases") +
coord_equal(xlim = c(143.75, 145.66),
ylim = c(-39.00, -36.50)) +
transition_manual(DATE) +
theme_void()
anim_save("cases by lga greater metro.gif")
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Active Covid-19 Cases per LGA per day",
subtitle = " ",
caption = "Note: active cases and NOT new cases") +
coord_equal(xlim = c(143.75, 146.00),
ylim = c(-39.00, -36.50)) +
transition_manual(DATE) +
theme_void()
anim_save("cases by lga greater metro.gif")
beep(2)
?animate
length(unique(cases_by_LGA_poly$DATE))
anim_save("cases by lga greater metro.gif",
frames = length(unique(cases_by_LGA_poly$DATE)),
fps = 1,
end_pause = 10)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey66",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Active Covid-19 Cases per LGA per day",
subtitle = " ",
caption = "Note: active cases and NOT new cases") +
coord_equal(xlim = c(143.75, 146.00),
ylim = c(-39.00, -38.75)) +
transition_manual(DATE) +
theme_void()
anim_save("cases by lga greater metro.gif",
frames = length(unique(cases_by_LGA_poly$DATE)),
fps = 1,
end_pause = 10)
beep(2)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey20",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Active Covid-19 Cases per LGA per day",
subtitle = " ",
caption = "Note: active cases and NOT new cases") +
coord_equal(xlim = c(143.75, 146.00),
ylim = c(-39.00, -37.25)) +
transition_manual(DATE) +
theme_void()
anim_save("cases by lga greater metro.gif",
frames = length(unique(cases_by_LGA_poly$DATE)),
fps = 1,
end_pause = 10)
beep(2)
ggplot(cases_by_LGA_poly,
aes(x = long, y = lat,
fill = ACTIVE, group = LGA)) +
geom_polygon(colour = "grey85",
size = 1) +
scale_fill_gradient(low = "grey66", high = "red2",
na.value = "grey66") +
labs(title = "Active Covid-19 Cases per LGA per day",
subtitle = " ",
caption = "Note: active cases and NOT new cases") +
coord_equal(xlim = c(144.10, 146.00),
ylim = c(-39.00, -37.25)) +
transition_manual(DATE) +
theme_void()
anim_save("cases by lga greater metro.gif",
frames = length(unique(cases_by_LGA_poly$DATE)),
fps = 1,
end_pause = 10)
beep(2)
